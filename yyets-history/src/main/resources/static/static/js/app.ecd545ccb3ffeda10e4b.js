webpackJsonp([1],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("yf3K"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=a("C7Lr")({name:"App"},r,!1,function(e){a("wc74")},null,null).exports,s=a("ddSS"),l={data:function(){return{searchForm:{name:"",pageNo:1,pageSize:10},total:0,loading:!1,dialogVisible:!1,resourceLinks:[],resourceLinksTableData:[],resourceRow:{},tableData:[],dialogTitle:"资源列表",linkGroup:0,operationType:0}},methods:{handleSizeChange:function(e){this.searchForm.pageSize=e,this.searchForm.pageNo=1,this.search()},handleCurrentChange:function(e){this.searchForm.pageNo=e,this.search()},viewSeason:function(e,t){this.resourceRow=e;var a=e.seasons[t];this.dialogTitle=e.name+" "+a.name,this.resourceLinks=a.groups;var n=this.resourceLinks.findIndex(function(e){return"HR-HDTV"===e.name||"MP4"===e.name});this.linkGroup=n>-1?n:0,this.resourceLinksTableData=this.resourceLinks[this.linkGroup].items,this.dialogVisible=!0},linkGroupChange:function(e){this.resourceRow.seasons&&0!==this.resourceRow.seasons.length&&(this.resourceLinksTableData=this.resourceLinks[e].items)},copyLink:function(e){var t=document.getElementById("hiddenLink");t||((t=document.createElement("textarea")).style.display="none",t.id="hiddenLink"),t.value=e,t.select(),document.execCommand("copy"),this.$message({message:"复制成功",type:"success"})},dealLink:function(e,t){var a=e.links[t].address;console.log(a),0===this.operationType?this.copyLink(a):this.$alert('<textarea style="width:380px;height:60px;">'+a+"</textarea>","查看链接",{dangerouslyUseHTMLString:!0})},search:function(e){var t=this;e&&(this.searchForm.pageNo=1);var a="",n=0;for(var r in this.searchForm){a+=""+(0===n?"?":"&")+r+"="+this.searchForm[r],n++}var i="/resource/page"+a;this.loading=!0,this.$axios.get(i).then(function(a){t.loading=!1;var n=a.data;t.tableData=n.list,t.total=n.total,t.searchForm.pageSize=n.pageSize,t.searchForm.pageNo=n.pageNum,e&&t.$message({message:"查询成功",type:"success"})}).catch(function(e){t.loading=!1,console.dir(e),t.$message.error("查询失败")})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{border:"1px solid #eee"}},[a("div",{staticClass:"grid-content bg-purple-light div-content"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"剧目:"}},[a("el-input",{attrs:{placeholder:"剧目"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(!0)}},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item"},[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.search(!0)}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"75vh",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"剧目",width:"180",fixed:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nameEN",label:"英文名",width:"180",fixed:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"频道",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"地区"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.seasons,function(n,r){return a("el-button",{key:""+t.row.id+r,staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.viewSeason(t.row,r)}}},[e._v(e._s(n.name)+"\n          ")])})}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"750px",top:"8vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"资源分组:"}},[a("el-select",{attrs:{placeholder:"资源分组",change:e.linkGroupChange(e.linkGroup)},model:{value:e.linkGroup,callback:function(t){e.linkGroup=t},expression:"linkGroup"}},e._l(e.resourceLinks,function(t,n){return a("el-option",{key:""+e.resourceLinks.name+t.name+n,attrs:{label:t.name,value:n}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"操作类型:"}},[a("el-select",{attrs:{placeholder:"操作类型"},model:{value:e.operationType,callback:function(t){e.operationType=t},expression:"operationType"}},[a("el-option",{attrs:{label:"复制",value:0}}),e._v(" "),a("el-option",{attrs:{label:"查看",value:1}})],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.resourceLinksTableData,height:"330px"}},[a("el-table-column",{attrs:{property:"episode",label:"分集",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"文件名",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{property:"size",label:"大小"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.links,function(n,r){return a("el-button",{key:""+e.resourceRow.id+t.row.episode+r,staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.dealLink(t.row,r)}}},[e._v(e._s(n.way)+"\n          ")])})}}])})],1)],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],staticClass:"pagination",attrs:{"current-page":e.searchForm.pageNo,"page-sizes":[10,20,30,40,50],"page-size":e.searchForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",background:"",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("textarea",{staticStyle:{display:"none"},attrs:{id:"hiddenLink"}})],1)},staticRenderFns:[]};var c=a("C7Lr")(l,o,!1,function(e){a("W5UQ")},null,null).exports;n.default.use(s.a);var u=new s.a({routes:[{path:"/",name:"Main",component:c}]}),p=a("Bldn"),d=a.n(p),h=(a("h9yL"),a("+L5+")),m=a.n(h);n.default.config.productionTip=!1,n.default.prototype.$axios=m.a,n.default.use(s.a),n.default.use(d.a),new n.default({el:"#app",router:u,components:{App:i},template:"<App/>"})},W5UQ:function(e,t){},h9yL:function(e,t){},wc74:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ecd545ccb3ffeda10e4b.js.map